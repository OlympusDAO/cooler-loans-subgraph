# Mirrors the Loan struct in Cooler.sol
type CoolerLoan @entity(immutable: true) {
  id: String! # cooler-loanID
  snapshots: [CoolerLoanSnapshot!]! @derivedFrom(field: "loan")
  createdBlock: BigInt!
  createdTimestamp: BigInt!
  createdTransaction: Bytes!
  cooler: Bytes! # address
  loanID: BigInt! # uint256
  borrower: Bytes! # address
  lender: Bytes! # address
  amount: BigDecimal! # Total amount of debt, including interest
  interest: BigDecimal!
  principal: BigDecimal!
  unclaimed: BigDecimal!
  collateral: BigDecimal!
  expiryTimestamp: BigInt!
  repayDirect: Boolean!
  hasCallback: Boolean!
  collateralToken: Bytes! # address
  debtToken: Bytes! # address
}

enum LoanStatus {
  Active
  Defaulted
  Repaid
}

type CoolerLoanSnapshot @entity(immutable: true) {
  id: String! # CoolerLoanID-blockNumber
  loan: CoolerLoan!
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transaction: Bytes!
  status: LoanStatus!
  secondsToExpiry: BigInt!
  loanPayable: BigDecimal!
  collateralDeposited: BigDecimal!
  repaidUnclaimed: BigDecimal!
  income: BigDecimal! # Non-cumulative income earned at the time of the snapshot
}
